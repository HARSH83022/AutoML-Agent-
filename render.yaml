services:
  - type: web
    name: automl-platform
    runtime: python
    plan: free
    branch: Phase-4
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      cd frontend
      npm install
      npm run build
      cd ..
      mkdir -p app/static
      if [ -d "frontend/dist" ]; then cp -r frontend/dist/* app/static/; echo "Frontend copied successfully"; else echo "Frontend dist not found"; fi
      ls -la app/static
    startCommand: gunicorn -w 2 -k uvicorn.workers.UvicornWorker app.main:app --bind 0.0.0.0:$PORT --timeout 600
    envVars:
      # Application Settings
      - key: APP_ENV
        value: production
      - key: LOG_LEVEL
        value: info
      - key: LLM_MODE
        value: none
      - key: SYNTHETIC_DEFAULT_ROWS
        value: "1000"
      
      # Kaggle Credentials (set these in Render Dashboard > Environment)
      - key: KAGGLE_USERNAME
        sync: false
      - key: KAGGLE_KEY
        sync: false
